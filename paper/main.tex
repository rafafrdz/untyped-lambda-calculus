\documentclass{article}

% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[english]{babel}

% Set page size and margins
% Replace `letterpaper' with`a4paper' for UK/EU standard size
\usepackage[letterpaper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{stmaryrd}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{amssymb}
\usepackage{ebproof}

\usepackage{stackengine}
\newcommand\stcarrow[2]{%
    \mathrel{\stackunder[2pt]{\stackon[4pt]{$\rightsquigarrow$}{$\scriptscriptstyle#1$}}{%
            $\scriptscriptstyle#2$}}}

\newcommand{\bigslant}[2]{{\raisebox{.2em}{$#1$}\left/\raisebox{-.2em}{$#2$}\right.}}
\newcommand{\rx}[2]{#1 \left/_{\stcarrow{}{\alpha}\;#2}}

\newcommand{\ar}[1]{\stcarrow{}{\alpha}#1}
\newcommand{\br}[1]{\stcarrow{}{\beta}#1}

\newcommand{\lmb}[1]{\lambda #1 .}
\newcommand{\lm}[1]{\lambda #1 .}
\newcommand{\qed}{\begin{flushright}\rule{0.7em}{0.7em}\end{flushright}}


\title{}
\date{}
\author{Rafael Fern√°ndez Ortiz}

\begin{document}
\maketitle

\section*{Assignments 1}
%% Exercise 1
\textbf{Exercise 1.} Classify the following terms according to $\alpha$-equivalence:

   $$\lmb{x} x y, \,\, \lmb{x} x z, \,\, \lmb{y} y z, \,\, \lmb{z} z z, \,\, \lmb{z} z y, \,\, \lmb{f} f y, \,\, \lmb{f} f f, \,\, \lmb{y} \lmb{x} x y, \,\, \lmb{z} \lmb{y} y z$$
Provide an $\alpha$-equivalent term where each abstraction uses a different variable name:
$$\lmb{x}((x(\lmb{y}xy))(\lmb{x}x))(\lmb{y}yx)$$
\subsubsection*{Solution} \\
Let $e$ a $\lambda$-term and $X$ a set of $\lambda$-terms, we can define
\begin{equation*}
    \bar{e} := \rx{X}{e}
\end{equation*}
the set that contains all $\lambda$-terms in $X$ such that they are $\alpha$-equivalent to $e$. We can consider $\mathcal{O}$ the set of all $\lambda$-term in the statement, i.e. $\mathcal{O} = \lbrace \lmb{x} x y, \,\, \lmb{x} x z, \,\, \lmb{y} y z, \,\, \lmb{z} z z, \,\, \lmb{z} z y, \,\, \lmb{f} f y, \,\, \lmb{f} f f, \,\, \lmb{y} \lmb{x} x y, \,\, \lmb{z} \lmb{y} y z \rbrace$.\\\\
\begin{equation*}
\begin{array}{l}
      \lm{x}xy \ar{\lm{z}z y} \\
      \lm{z}z y\\
      \lm{f}fy \ar{\lm{z}z y}\\\\
      \lm{x}xz \\
      \lm{y}yz  \ar{\lm{x}xz}\\\\
      \lm{z}zz \\
      \lm{f}ff \ar{\lm{z}zz}\\\\
      \lm{y}\lm{x} x y \ar{\lm{z}\lm{x} x z} \ar{\lm{z}\lm{y} y z} \\
      \lm{z}\lm{y} y z \\\\
\end{array}
\end{equation*}\\\\
Therefore
\begin{equation*}
\begin{array}{l}
      \rx{\mathcal{O}}{\lm{z}z y} = \lbrace \lm{x}xy, \;\; \lm{z}zy, \;\; \lm{f}fy \rbrace \\
      \rx{\mathcal{O}}{\lm{x}x z} = \lbrace \lm{x}xz, \;\; \lm{y}yz \rbrace \\
      \rx{\mathcal{O}}{\lm{z}z z} = \lbrace \lm{z}zz, \;\; \lm{f}ff \rbrace \\
      \rx{\mathcal{O}}{\lm{z}\lm{y}y z} = \lbrace \lm{z}\lm{y}y z, \;\; \lm{y}\lm{x}x y \rbrace \\
\end{array}
\end{equation*}
Now we will provide and $\alpha$-equivalence for the following term $\lmb{x}((x(\lmb{y}xy))(\lmb{x}x))(\lmb{y}yx)$ where each abstraction uses a different variable name.
\begin{equation*}
\begin{array}{l}
      \lm{y}xy \ar{\lm{z_1}x z_1} \\
      \lm{x}x \ar{\lm{z_2}z_2}\\
      \lm{y}yx \ar{\lm{z_3}z_3 x}\\
\end{array}
\end{equation*}\\\\
Therefore, $\lmb{x}((x(\lmb{y}xy))(\lmb{x}x))(\lmb{y}yx) \ar{ \lmb{a}((a(\lmb{z_1}az_1))(\lmb{z_2}z_2))(\lmb{z_3}z_3a) }$

\qed
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Exercise 2
\textbf{Exercise 2.} Normalize the following term: $(\lmb{x} (\lmb{y} x y)) y$
\subsubsection*{Solution} \\
$$(\lmb{x} (\lmb{y} x y)) y \ar{(\lm{x}(\lm{z}xz))y} \br{\lm{z}yz}$$
\qed
%% Exercise 3
\textbf{Exercise 3.} The \textit{de Brujin index notation} is a way of avoiding the problems related to substitution and variable capture in Church's original presentation of the $\lambda$-calculus, thus facilitating its mechanized treatment. The key idea is to replace variable names by numbers denoting the \textit{depth} of the scope of that variable. For example, the familiar terms, $\lmb{x}x$, $\lmb{x}\lmb{y}x$ and $\lmb{x}\lm{y}y$ are represented as $\lambda 1$, $\lambda \lambda 2$, $\lambda \lambda 1$ in de Brujin's notation. Free variables are represented by numbers higher than de maximum depth in its location. For example, $\lambda \lambda 3$ is a possible representation for $\lm{x}\lm{y}w$.
\begin{enumerate}
    \item[a)] Represent the term $(\lm{x}\lm{y}\lm{z} x z y)(\lm{x}\lm{y} x)$ in de Brujin's notation.
    \item[b)] Explain how $\beta$-reduction of terms in de Brujin notation can be implemented.
    \item[c)] Apply your ideas to the application in a).
\end{enumerate}
\subsubsection*{Solution} \\
\subsubsection*{a)}
$$(\lm{x}\lm{y}\lm{z} x z y)(\lm{x}\lm{y} x) \longrightarrow (\lambda \lambda \lambda 312)(\lambda \lambda 2)$$
\subsubsection*{b)}
In order to find some mechanism to do a "$\beta$-Brujin-reduction", we can see some pattern in the way to do $\beta$-reduction for our $\lambda$-term. Therefore, we will do $\beta$-reduction in our expression as follow:\\
\begin{equation*}
\begin{array}{l}
      (\lm{x}\lm{y}\lm{z} x y z)(\lm{x}\lm{y}x) \ar{(\lm{x}\lm{y}\lm{z} x y z)(\lm{x_0}\lm{x_1}x_0)} \br{} \\
      \br{(\lm{y}\lm{z}(\lm{x_0}\lm{x_1}x_0)zy)} \br{\lm{y}\lm{z}(\lm{x_1}z)y} \br{} \\
      \br{\lm{y}\lm{z}z}
\end{array}
\end{equation*}\\
We can observe that the idea is to reduce first the leftmost outermost redex in our $\lambda$-term. In a Brujin approach we can do something similar:
\begin{enumerate}
    \item Identify which one is the number related to the first leftmost outermost lambda.
    \item Replace this number by the following de Brujin term and drop the correspond lambda.
    \item If the de Brujin term has free variable, then reduce the number by $1$.
    \item If apply a number by some lambda, we increase 1, i.e, $(\underline{\lambda} \lambda \underline{2})\underline{1} = \lambda (1 +1) = \lambda 2$

\end{enumerate}
\subsubsection*{c)}
\begin{equation*}
\begin{array}{rl}
      (\underline{\lambda} \lambda \lambda \underline{3}12)\underline{(\lambda \lambda 2)}  \rightarrow & (\lambda \lambda (\underline{\lambda} \lambda \underline{2})\underline{1}2) \rightarrow \\  \rightarrow & (\lambda \lambda ( \lambda (1+1))2) \rightarrow \\
      \rightarrow & (\lambda \lambda (\underline{\lambda} 2)2) \rightarrow \\
      \rightarrow & (\lambda \lambda (2-1)) \rightarrow \\
      \rightarrow & (\lambda \lambda 1)
\end{array}
\end{equation*}\\

\qed
%% Exercise 4
\textbf{Exercise 4.} \textit{Combinators} can be seen as $\lambda$-terms without free variables - althought they were actually proposed indepently from the $\lambda$-calculus. Given the combinators $\text{S}=\lm{x}\lm{y}\lm{z}(x z)(y z)$, $\text{K}=\lm{x}\lm{y}x$, and $\text{I}=\lm{x}x$, prove the equivalence SKK = I.
\subsubsection*{Solution} \\
\begin{equation*}
\begin{array}{rll}
      \text{SKK} =  & (\lm{x}\lm{y}\lm{z}(x z)(y z))(\lm{x}\lm{y}x)(\lm{x}\lm{y}x) \ar{} & \\
                    & \ar{(\lm{x}\lm{y}\lm{z}(x z)(y z))(\lm{z_0}\lm{z_1}z_0)(\lm{x_0}\lm{x_1}x_0)} \br{}& \\
                    & \br{(\lm{y}\lm{z}((\lm{z_0}z_1 z_0)z)(yz))(\lm{x_0}\lm{x_1}x_0)} \br{}& \\
                    & \br{(\lm{z}((\lm{z_0}\lm{z_1} z_0)z)((\lm{x_0}\lm{x_1}x_0)z))} \br{}& \\
                    & \br{(\lm{z}(\lm{z_1} z)((\lm{x_0}\lm{x_1}x_0)z))} \br{} & \\
                    & \br{\lm{z}(\lm{z_1}z)(\lm{x_1}z)} \br{} & \\
                    & \br{\lm{z}z} = \text{I} & \\
\end{array}
\end{equation*}\\
\qed
%% Exercise 5
\textbf{Exercise 5.} Combinators systems are commonly presented as equational theories where a \textit{combinator base} is defined using oriented equational rules and new combinators are created by means of application alone - no abstraction is required. For example, the aforementioned combinators would be defined by the equations $\text{S}mno = mo(no)$, $\text{K}ab = a$ and $\text{I}x = x$. As variales only appear in definitions where no confusion of scope can happen, combinators solve in a natural way many of the nuissances associated with variable names in Church's formulation of the $\lambda$-caluclus.\\

Take as base the following two combinators: $\text{B}f g x = f(g x)$ and $\text{M}x = xx$. Using B and M alone prove the existence of a \textit{narcissistic} combinator $n$ such that $nn=n$.
\subsubsection*{Solution} \\
ToDo
\qed
%% Exercise 6
\textbf{Exercise 6.} Using Church's encoding of booleans in the pure $\lambda$-calculus, define normalized $\lambda$-terms CONJ, DISJ, and NEG to represent conjunction, disjunction and negation, respectively. (\textbf{Hint.} define a $\lambda$-term COND which behaves as an \textit{if-then-else} and apply $\beta$-reduction).
\subsubsection*{Solution} \\
We can define COND combinator as follow:
\begin{equation*}
\begin{array}{lll}
      \text{COND} & =  & \lm{b} \lm{x}\; \lm{y} b \; x \; y
\end{array}
\end{equation*}
Therefore, the simplest idea to define CONJ AND DISJ is using COND:
\begin{equation*}
\begin{array}{lll}
      \text{CONJ} & =  & \lm{b_1} \lm{b_2}\;  \text{COND} \; b_1 \; b_2 \;\text{FALSE}  \\
      \text{NEG} & = &  \lm{b_1} \; \text{COND} \; b_1 \;\text{FALSE} \;\; \text{TRUE}\\
      \text{DISJ} & = &  \lm{b_1} \lm{b_2}\;  \text{COND} \; b_1 \; \text{TRUE} \;\; b_2\\
\end{array}
\end{equation*}
But, if we do $\beta$-reductions, the combinators defined above are $\beta$-equivalent to the following lambda terms:
\begin{equation*}
\begin{array}{lll}
      \text{CONJ} & =  & \lm{b_1} \lm{b_2}\;  b_1 \; b_2 \;\text{FALSE}  \\
      \text{NEG} & = &  \lm{b_1} \; b_1 \;\text{FALSE} \;\; \text{TRUE}\\
      \text{DISJ} & = &  \lm{b_1} \lm{b_2}\;  b_1 \; \text{TRUE} \;\; b_2\\
\end{array}
\end{equation*}
\qed
%% Exercise 7
\textbf{Exercise 7.} Using Church's encoding of natural numbers define addition, multiplication and exponentiation.
\subsubsection*{Solution} \\
\begin{equation*}
\begin{array}{lll}
      \text{ADD} & =  & \lm{m} \lm{n}\lm{f}\lm{x}\;  m f (n f x)  \\
      \text{MUL} & = &  \lm{m} \lm{n} \; m \; (\text{ADD} \; \; n) \; \; \bar{0}\\
      \text{EXP} & = &  \lm{m} \lm{n} \; n \; (\text{MUL} \; \; m) \; \; \bar{1}\\
\end{array}
\end{equation*}
\qed
%% Exercise 8
\textbf{Exercise 8.} Devise an encoding for pairs in the $\lambda$-caluclus. Provide $\lambda$-terms PAIR (a pair constructor) and the projections FST and SND. What properties would be required in order to check the correctness of the encoding?
\subsubsection*{Solution} \\
\begin{equation*}
\begin{array}{lll}
      \text{PAIR} & =  & \lm{x} \lm{y}\lm{f}\;  f \; x \; y  \\
      \text{FST} & = &  \lm{p} \; p \; \text{TRUE}\\
      \text{SND} & = &  \lm{p} \; p \; \text{FALSE}\\
\end{array}
\end{equation*}\\
In order to check the correctness of the encoding, we will prove that  FST (PAIR $a$ $b$) $\br{}$ $a$ and\\ SND (PAIR $a$ $b$) $\br{}$ $b$.
\begin{equation*}
\begin{array}{lll}
      \text{FST (PAIR } a \; b \text{)} =   & \lm{p} \; p \; \text{TRUE (PAIR } a \; b \text{)} \br{} & \\
        & \br{\text{(PAIR } a \; b \text{) TRUE}} \br{(\lm{x} \lm{y} \lm{f} f x\;y)\; a \;  b \; \text{TRUE}} \br{} &\\
        & \br{(\lm{y} \lm{f} f \;a\; y)\; b \; \text{TRUE}} \br{(\lm{f} f \;a\; b) \; \text{TRUE}} \br{} & \\
        & \br{\text{TRUE} \;a\; b} \br{(\lm{x} \lm{y} x) \;a \;b} \br{(\lm{y} a) \;b} \br{a} & 
\end{array}
\end{equation*}\\
\begin{equation*}
\begin{array}{lll}
      \text{SND (PAIR } a \; b \text{)} =   & \lm{p} \; p \; \text{FALSE (PAIR } a \; b \text{)} \br{} & \\
        & \br{\text{(PAIR } a \; b \text{) FALSE}} \br{(\lm{x} \lm{y} \lm{f} f x\;y)\; a \;  b \; \text{FALSE}} \br{} &\\
        & \br{(\lm{y} \lm{f} f \;a\; y)\; b \; \text{FALSE}} \br{(\lm{f} f \;a\; b) \; \text{FALSE}} \br{} & \\
        & \br{\text{FALSE} \;a\; b} \br{(\lm{x} \lm{y} y) \;a \;b} \br{(\lm{y} y) \;b} \br{b} & 
\end{array}
\end{equation*}
\qed
%% Exercise 9
\textbf{Exercise 9.} Define a predecessor function and subtraction for Church numerals. (\textbf{Hint.} You may use the pairs just defined).
\subsubsection*{Solution} \\
ToDo
\qed
%% Exercise 10
\textbf{Exercise 10.} Imagine that the list $\left[ a_1, a_2, \ldots a_n \right]$ is represented in the lambda calculus by the term $$\lm{f}\lm{x}f a_1 (f a_2 ( \ldots f a_n x ))$$
Define:
\begin{enumerate}
    \item[a)] NIL, the empty list constructor
    \item[b)] APP, a function to concatenate two lists
    \item[c)] HD, which returns the first element of a nonempty list
    \item[d)] ISEMPTY, a function to check whether a list is empty
\end{enumerate}
\subsubsection*{Solution} \\
\begin{equation*}
\begin{array}{lll}
      \text{NIL} & =  & \text{FALSE}  \\
      \text{HD} & = &  \lm{l} \; l \; \text{TRUE}\\
      \text{APP} & = &  \lm{xs} \lm{ys} \lm{f} \lm{x} \; xs \; f \; (ys \; f \; x)\\
      \text{ISEMPTY} & = &  \lm{xs} \; xs \; (\lm{h} \lm{t} \; \text{FALSE}) \; \text{TRUE}\\
\end{array}
\end{equation*}\\
\qed
\end{document}